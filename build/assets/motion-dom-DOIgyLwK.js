import{a as t,p as e}from"./motion-utils-Cn7fW4KM.js";const n=t((()=>void 0!==window.ScrollTimeline));class r{constructor(t){this.stop=()=>this.runAll("stop"),this.animations=t.filter(Boolean)}get finished(){return Promise.all(this.animations.map((t=>"finished"in t?t.finished:t)))}
/**
   * TODO: Filter out cancelled or stopped animations before returning
   */getAll(t){return this.animations[0][t]}setAll(t,e){for(let n=0;n<this.animations.length;n++)this.animations[n][t]=e}attachTimeline(t,e){const r=this.animations.map((r=>n()&&r.attachTimeline?r.attachTimeline(t):"function"==typeof e?e(r):void 0));return()=>{r.forEach(((t,e)=>{t&&t(),this.animations[e].stop()}))}}get time(){return this.getAll("time")}set time(t){this.setAll("time",t)}get speed(){return this.getAll("speed")}set speed(t){this.setAll("speed",t)}get startTime(){return this.getAll("startTime")}get duration(){let t=0;for(let e=0;e<this.animations.length;e++)t=Math.max(t,this.animations[e].duration);return t}runAll(t){this.animations.forEach((e=>e[t]()))}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class i extends r{then(t,e){return Promise.all(this.animations).then(t).catch(e)}}function s(t,e){return t?t[e]||t.default||t:void 0}const a=2e4;function o(t){let e=0;let n=t.next(e);for(;!n.done&&e<a;)e+=50,n=t.next(e);return e>=a?1/0:e}function u(t){return"function"==typeof t}function l(t,e){t.timeline=e,t.onfinish=null}const c=t=>Array.isArray(t)&&"number"==typeof t[0],f={linearEasing:void 0};function d(e,n){const r=t(e);return()=>{var t;return null!==(t=f[n])&&void 0!==t?t:r()}}const m=d((()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch(t){return!1}return!0}),"linearEasing"),h=(t,n,r=10)=>{let i="";const s=Math.max(Math.round(n/r),2);for(let a=0;a<s;a++)i+=t(e(0,s-1,a))+", ";return`linear(${i.substring(0,i.length-2)})`};function p(t){return Boolean("function"==typeof t&&m()||!t||"string"==typeof t&&(t in v||m())||c(t)||Array.isArray(t)&&t.every(p))}const y=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,v={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:y([0,.65,.55,1]),circOut:y([.55,0,1,.45]),backIn:y([.31,.01,.66,-.59]),backOut:y([.33,1.53,.69,.99])};function E(t,e){return t?"function"==typeof t&&m()?h(t,e):c(t)?y(t):Array.isArray(t)?t.map((t=>E(t,e)||v.easeOut)):v[t]:void 0}const g={x:!1,y:!1};function A(){return g.x||g.y}function b(t,e){const n=function(t){if(t instanceof Element)return[t];if("string"==typeof t){const e=document.querySelectorAll(t);return e?Array.from(e):[]}return Array.from(t)}(t),r=new AbortController;return[n,{passive:!0,...e,signal:r.signal},()=>r.abort()]}function w(t){return!("touch"===t.pointerType||A())}function T(t,e,n={}){const[r,i,s]=b(t,n),a=t=>{if(!w(t))return;const{target:n}=t,r=e(n,t);if("function"!=typeof r||!n)return;const s=t=>{w(t)&&(r(t),n.removeEventListener("pointerleave",s))};n.addEventListener("pointerleave",s,i)};return r.forEach((t=>{t.addEventListener("pointerenter",a,i)})),s}const x=(t,e)=>!!e&&(t===e||x(t,e.parentElement)),L=t=>"mouse"===t.pointerType?"number"!=typeof t.button||t.button<=0:!1!==t.isPrimary,k=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);const I=new WeakSet;function O(t){return e=>{"Enter"===e.key&&t(e)}}function P(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}function S(t){return L(t)&&!A()}function $(t,e,n={}){const[r,i,s]=b(t,n),a=t=>{const r=t.currentTarget;if(!S(t)||I.has(r))return;I.add(r);const s=e(r,t),a=(t,e)=>{window.removeEventListener("pointerup",o),window.removeEventListener("pointercancel",u),S(t)&&I.has(r)&&(I.delete(r),"function"==typeof s&&s(t,{success:e}))},o=t=>{a(t,n.useGlobalTarget||x(r,t.target))},u=t=>{a(t,!1)};window.addEventListener("pointerup",o,i),window.addEventListener("pointercancel",u,i)};return r.forEach((t=>{(function(t){return k.has(t.tagName)||-1!==t.tabIndex})(t)||null!==t.getAttribute("tabindex")||(t.tabIndex=0);(n.useGlobalTarget?window:t).addEventListener("pointerdown",a,i),t.addEventListener("focus",(t=>((t,e)=>{const n=t.currentTarget;if(!n)return;const r=O((()=>{if(I.has(n))return;P(n,"down");const t=O((()=>{P(n,"up")}));n.addEventListener("keyup",t,e),n.addEventListener("blur",(()=>P(n,"cancel")),e)}));n.addEventListener("keydown",r,e),n.addEventListener("blur",(()=>n.removeEventListener("keydown",r)),e)})(t,i)),i)})),s}function B(t){return"x"===t||"y"===t?g[t]?null:(g[t]=!0,()=>{g[t]=!1}):g.x||g.y?null:(g.x=g.y=!0,()=>{g.x=g.y=!1})}export{i as G,c as a,E as b,o as c,l as d,p as e,s as f,h as g,L as h,u as i,B as j,T as k,a as m,$ as p,m as s};
